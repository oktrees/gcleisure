function MyCustomUploadAdapterPlugin(t){t.plugins.get("FileRepository").createUploadAdapter=(t=>new UploadAdapter(t))}!function(t){"use strict";new XMLHttpRequest;t("#datepicker").datepicker(),t(".nav-treeview .nav-link").on("click",function(){console.log(t(this).attr("class")),t(".nav-treeview .nav-link").removeClass("active"),t(this).addClass("active")});var e,o={decimal:"",emptyTable:"데이터가 없습니다.",info:"_START_ - _END_ (총 _TOTAL_ 개)",infoEmpty:"0개",infoFiltered:"(전체 _MAX_ 개 중 검색결과)",infoPostFix:"",thousands:",",lengthMenu:"_MENU_ 개씩 보기",loadingRecords:"로딩중...",processing:"처리중...",search:"검색 : ",zeroRecords:"검색된 데이터가 없습니다.",paginate:{first:"첫 페이지",last:"마지막 페이지",next:"다음",previous:"이전"},aria:{sortAscending:" :  오름차순 정렬",sortDescending:" :  내림차순 정렬"}},n=t("#datatable").DataTable({serverSide:!0,paging:!0,info:!0,order:[],ajax:{url:"/administrator/ajax_list",type:"POST",data:{type:t("#datatable").attr("data-id")}},lengthChange:!1,columnDefs:[{render:function(t,e,o){return"<input type='checkbox' name='check' value='"+t+"'>"},targets:[0],width:"1%"},{targets:[1],className:"text-center",width:"6%"},{targets:[2],visible:!1},{targets:[3],className:"text-center",width:"25%",sClass:"my_class"},{targets:[4],className:"text-center",sClass:"my_class"},{targets:[5],className:"text-center",width:"10%"},{targets:[],orderable:!1},{targets:-1,className:"text-center",data:null,defaultContent:"<button type='button' class='btn btn-block btn-outline-warning btn-xs'>수정</button>",width:"6%"}],autoWidth:!1,ordering:!1,language:o});t("#datatable tbody").on("click","tr button.btn",function(){var o=n.row(t(this).closest("tr")).data(),a=t("#datatable").attr("data-id");switch(a){case"notice":t(".modal-title").text("공지사항 수정");break;case"question":t(".modal-title").text("문의하기 수정");break;case"photo":t(".modal-title").text("포토갤러리 수정");break;case"reviews":t(".modal-title").text("이용후기 수정")}if(t("input[name='idx']").val(o[0]),t("input[name='title']").val(o[3]),e.setData(o[2]),console.log(o[2]),t("#boardModalFooter > button:nth-child(2)").css("display","none"),t("#boardModalFooter > button:nth-child(3)").css("display","block"),"question"==a){console.log(o[0]);var i=c.ajax(o[0],null,"commentCheck");console.log(i),console.log(i.length),i.length>0?(t("#commentButtonDiv").css("display","none"),t("#commentContents").text(i[0].comment),t("#commentDiv").css("display","block")):(t("#commentButtonDiv").css("display","block"),t("#commentDiv").css("display","none"))}t("#modal-xl").modal("show")}),t("#commentInsert").on("click",function(){t(".modal-title.comment").text("답변등록"),t('textarea[name="commentText"]').val(""),t("#commentModifyButton").css("display","none"),t("#commentInsertButton").css("display","block"),t("#modal-comment").modal("show")}),t("#commentInsertButton").on("click",function(){var e=t('input[name="idx"]').val(),o=t('textarea[name="commentText"]').val(),n={};n.data={p_idx:e,comment:o},t.ajax({url:"/administrator/commentInsert",data:n,async:!1,type:"POST",success:function(e){console.log(e),Swal.fire({icon:"success",title:"답변등록 완료",showConfirmButton:!1,timer:1500}),t("#modal-comment").modal("hide"),t("#commentButtonDiv").css("display","none"),t("#commentDiv").css("display","block"),t("#commentContents").text(o)},error:function(t){c.error()}})}),t(".float-right.btn-tool").on("click",function(){var e=t('input[name="idx"]').val();c.del(e,null,"comment")}),t(".link-black.text-sm").on("click",function(){t(".modal-title.comment").text("답변수정"),t("#commentInsertButton").css("display","none"),t("#commentModifyButton").css("display","block"),t('textarea[name="commentText"]').val(t("#commentContents").text()),t("#modal-comment").modal("show")}),t("#commentModifyButton").on("click",function(){var e={p_idx:t('input[name="idx"]').val(),comment:t('textarea[name="commentText"]').val()};c.modify(e,null,"comment_modify")}),t("#noticeButton,#questionButton,#photoButton,#reviewsButton").on("click",function(){switch(t("#commentDiv").css("display","none"),t("input[name='idx']").val(""),t(this).attr("data-id")){case"notice":t(".modal-title").text("공지사항");break;case"question":t(".modal-title").text("문의하기");break;case"photo":t(".modal-title").text("포토갤러리");break;case"reviews":t(".modal-title").text("이용후기")}t("#boardModalFooter > button:nth-child(2)").css("display","block"),t("#boardModalFooter > button:nth-child(3)").css("display","none"),t("#modal-xl").modal("show")}),t("#modal-xl").on("hidden.bs.modal",function(o){t("input[name='title']").val(""),e.setData("")});var a={removePlugins:["Link","MediaEmbed"],extraPlugins:[MyCustomUploadAdapterPlugin]};"question"===location.pathname.split("/")[3]&&(a.toolbar=[]),ClassicEditor.create(document.querySelector("#editor"),a).then(t=>{(e=t).plugins.get("TextTransformation").isEnabled=!1,e.plugins.get("ImageCaption").isEnabled=!1,e.model.document.on("change:data",(e,o)=>{console.log(t.getData())})}).catch(t=>{console.error(t)}),t("#noticeCancelButton,#questionCancelButton,#photoCancelButton,#reviewsCancelButton").on("click",function(){const o=/img src="\/res\/img\/(.+?)"\>/gm;let n;for(var a=[];null!==(n=o.exec(e.getData()));)n.index===o.lastIndex&&o.lastIndex++,n.forEach((t,e)=>{1==e&&a.push(t)});const i=new FormData;for(var r=0;r<a.length;r++)i.append("unlink[]",a[r]);t.ajax({url:"/administrator/unlink",data:i,processData:!1,contentType:!1,type:"POST",success:function(t){}})}),t("#noticeInsertButton,#questionInsertButton,#photoInsertButton,#reviewsInsertButton").on("click",function(){const o=e.getData(),n=t("#Form").serializeArray();var a=t(this).attr("data-id");switch(a){case"notice":a=1;break;case"question":a=2;break;case"photo":a=3;break;case"reviews":a=4}var i={name:"type",value:a};n.push(i),""==n[1].value?Swal.fire({text:"제목을 입력하세요!",icon:"error"}):""==o?Swal.fire({text:"내용을 입력하세요!",icon:"error"}):c.insert(n,o)}),t("#noticeModifyButton,#questionModifyButton,#photoModifyButton,#reviewsModifyButton").on("click",function(){const o=e.getData(),n=t("#Form").serializeArray();var a=t(this).attr("data-id");switch(a){case"notice":a=1;break;case"question":a=2;break;case"photo":a=3;break;case"reviews":a=4}console.log(n);var i={name:"type",value:a};n.push(i),""==n[1].value?Swal.fire({text:"제목을 입력하세요!",icon:"error"}):""==o?Swal.fire({text:"내용을 입력하세요!",icon:"error"}):c.modify(n,o,"board")}),t("#noticeDelButton,#questionDelButton,#photoDelButton,#reviewsDelButton").on("click",function(){var e=t('input[name="check"]:checked'),o=[],a=[];e.length>0&&(e.each(function(){var e=t(this).val();o.push(Number(e));var i=n.row(t(this).closest("tr")).data();var r=/img src="\/res\/img\/(.+?)"\>/gm.exec(i[2]);null!==r&&a.push(r[1])}),console.log(o),c.del(o,a,"board"))});var i=t('input[name="allCheck"]');i.change(function(){var e=t(this).prop("checked");t('input[name="check"]').prop("checked",e)}),t("#datatable,#reservationtable").on("change",'input[name="check"]',function(){var e=t('input[name="check"]').length==t('input[name="check"]:checked').length;i.prop("checked",e)});var r=t("#reservationtable").DataTable({serverSide:!0,paging:!0,info:!0,order:[],ajax:{url:"/administrator/reservation_ajax_list",type:"POST",data:{type:t("#reservationtable").attr("data-id")}},drawCallback:function(){},lengthChange:!1,columnDefs:[{render:function(t,e,o){return"<input type='checkbox' name='check' value='"+t+"'>"},targets:[0],width:"1%"},{targets:[1],className:"text-center",width:"3%",sClass:"my_class"},{targets:[2],visible:!1},{targets:[3],className:"text-center",width:"10%"},{targets:[4],className:"text-center",width:"10%"},{targets:[5],className:"text-center",width:"10%"},{targets:[6],className:"text-center",width:"15%"},{targets:[7],className:"text-center",render:function(t,e,o){var n;return 1==t?(n="secondary",t="대기"):2==t?(n="success",t="완료"):3==t&&(n="cancle",t="취소"),"<div class='color-palette-set'><div class='bg-"+n+" color-palette'><span style='color:#eee'>"+t+"</span></div>"},width:"10%"},{targets:-1,className:"text-center",data:null,defaultContent:"<button type='button' class='btn btn-block btn-outline-warning btn-xs'>수정</button>",width:"6%"}],autoWidth:!1,ordering:!1,language:o});t("#reservationtable tbody").on("click","tr button.btn",function(){var e=r.row(t(this).closest("tr")).data();t("#division.custom-select").val(e[2]).prop("selected",!0),console.log(t("#default-picker"));var o=t("#reservationModalTable");t("input[name='idx']").val(e[0]),t(o).find("td:eq(0)").text(e[3]),t(o).find("td:eq(1) input").val(e[4]),t("#default-picker").val(e[8]),t(o).find("td:eq(3) input").val(e[5]),t(o).find("td:eq(4)").text(e[6]),t("#typeSelect").val(e[7]),t("#modal-reservation").modal("show")}),t("#typeSelect").on("change",function(){console.log(t(this).val())}),t("#confirmReservationButton").on("click",function(){var e=t("#reservationForm").serializeArray();c.modify(e,null,"reservation")}),t("#confirmReservationDelButton").on("click",function(){var e=t('input[name="check"]:checked'),o=[];e.length>0&&(e.each(function(){var e=t(this).val();o.push(Number(e))}),console.log(o),c.del(o,[],"reservation"),i.prop("checked",!1))});var c={insert:function(o,a){Swal.fire({title:"신규등록",text:"등록 하시겠습니까?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"취소",confirmButtonText:"등록"}).then(i=>{if(i.value){var r=c.ajax(o,a,"insert");console.log(r),r&&Swal.fire({position:"center",icon:"success",title:"등록 되었습니다.",showConfirmButton:!1,timer:1e3}).then(e=>{n.draw(!1),t("#modal-xl").modal("hide")})}else{/img src=(.+?)\>/gm.exec(e.getData())}})},modify:function(e,o,a){Swal.fire({title:"수정 ",text:"수정 하시겠습니까?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"취소",confirmButtonText:"수정"}).then(i=>{if(i.value){if("board"==a)var l=c.ajax(e,o,"modify");else if("comment_modify"==a)l=c.ajax(e,o,"comment_modify");else l=c.ajax(e,o,"reservation_modify");l?Swal.fire({position:"center",icon:"success",title:"수정 되었습니다.",showConfirmButton:!1,timer:1500}).then(o=>{console.log(o),"board"==a?(n.draw(!1),t("#modal-xl").modal("hide")):"comment_modify"==a?(t("#commentContents").text(e.comment),t("#modal-comment").modal("hide")):(r.draw(!1),t("#modal-reservation").modal("hide"))}):(Swal.fire({position:"center",icon:"warning",title:"수정된 내용이 없습니다.",showConfirmButton:!1,timer:1500}),"board"==a?(n.draw(!1),t("#modal-xl").modal("hide")):"comment_modify"==a?(t("#commentContents").text(e.comment),t("#modal-comment").modal("hide")):(r.draw(!1),t("#modal-reservation").modal("hide")))}else"board"==a?(n.draw(!1),t("#modal-xl").modal("hide")):"comment_modify"==a?(t("#commentContents").text(e.comment),t("#modal-comment").modal("hide")):(r.draw(!1),t("#modal-reservation").modal("hide"))})},del:function(e,o,a){var l;l="board"==a?"게시물 삭제":"comment"==a?"답변 삭제":"예약 삭제",Swal.fire({title:l,text:"삭제 하시겠습니까?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6c757d",cancelButtonText:"취소",confirmButtonText:"삭제"}).then(l=>{if(l.value){if("board"==a)var s=c.ajax(e,o,"del");else if("comment"==a)s=c.ajax(e,null,"comment_del");else s=c.ajax(e,null,"reservation_del");s&&Swal.fire({position:"center",icon:"success",title:"삭제 되었습니다.",showConfirmButton:!1,timer:1500}).then(e=>{i.prop("checked",!1),"board"==a?(n.draw(!1),t("#modal-xl").modal("hide")):"comment"==a?t("#modal-xl").modal("hide"):(r.draw(!1),t("#modal-reservation").modal("hide"))})}else{}})},error:function(){Swal.fire({position:"center",icon:"error",title:"요청이 정상적으로 처리되지 않았습니다.",showConfirmButton:!1,timer:1500})},ajax:function(e,o=null,n=null){const a={};var i;switch(n){case"insert":a.form=e,a.editor=o,i="/administrator/boardInsert";break;case"del":a.data=e,a.link=o,i="/administrator/boardDelete";break;case"modify":a.form=e,a.editor=o,i="/administrator/boardModify";break;case"reservation_modify":a.form=e,a.editor=o,i="/administrator/reservationModify";break;case"reservation_del":a.data=e,i="/administrator/reservationDelete";break;case"commentCheck":a.idx=e,i="/administrator/commentCheck";break;case"comment_del":a.p_idx=e,i="/administrator/commentDel";break;case"comment_modify":a.data=e,i="/administrator/commentModify"}var r=[];return t.ajax({url:i,data:a,async:!1,type:"POST",success:function(t){r=t},error:function(t){c.error()}}),r}}}(jQuery);